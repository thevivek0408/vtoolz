<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Crossword</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0f0f1a;color:#e0e0e0;font-family:'Segoe UI',Arial,sans-serif;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:16px;user-select:none}
h1{font-size:1.5rem;margin-bottom:10px;background:linear-gradient(135deg,#00b894,#55efc4);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
.stats{display:flex;gap:12px;margin:8px 0 12px;flex-wrap:wrap;justify-content:center;font-size:.85rem}
.stat{background:#1a1a2e;padding:8px 16px;border-radius:20px;border:1px solid #333}
.stat b{color:#55efc4}
.puzzle-select{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;justify-content:center}
.puzzle-select button{background:#1e1e3a;border:1px solid #444;color:#e0e0e0;padding:5px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;transition:all .2s}
.puzzle-select button:hover,.puzzle-select button.active{background:#00b894;border-color:#00b894;color:#fff}
.grid-wrap{display:flex;gap:20px;flex-wrap:wrap;justify-content:center;align-items:flex-start}
.grid{display:inline-grid;gap:2px;background:#333;border:2px solid #55efc4;border-radius:4px;padding:2px}
.cell{width:clamp(32px,7vw,42px);height:clamp(32px,7vw,42px);position:relative;background:#1e1e3a;display:flex;align-items:center;justify-content:center;font-size:clamp(14px,3vw,18px);font-weight:700;text-transform:uppercase;cursor:pointer;color:#fff;border:2px solid transparent;transition:border-color .15s}
.cell.black{background:#0a0a15;cursor:default}
.cell.selected{border-color:#55efc4;background:#00b89422}
.cell.highlighted{background:#1a3a2e}
.cell.correct{color:#55efc4}
.cell .num{position:absolute;top:1px;left:3px;font-size:clamp(8px,1.5vw,10px);color:#888;font-weight:400}
.clues{max-width:300px;width:100%}
.clues h3{color:#55efc4;font-size:.9rem;margin:8px 0 4px;border-bottom:1px solid #333;padding-bottom:4px}
.clue{padding:4px 8px;font-size:.8rem;border-radius:4px;cursor:pointer;transition:background .15s;margin:2px 0;color:#bbb}
.clue:hover{background:#1e1e3a}
.clue.active{background:#00b89433;color:#55efc4}
.clue.solved{color:#555;text-decoration:line-through}
.clue b{color:#888;margin-right:6px}
.controls{margin:12px 0;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.controls button{background:#1e1e3a;border:1px solid #444;color:#e0e0e0;padding:8px 18px;border-radius:8px;cursor:pointer;font-size:.85rem;transition:all .2s}
.controls button:hover{background:#00b894;border-color:#00b894;color:#fff}
.win-msg{display:none;font-size:1.2rem;color:#55efc4;margin-top:12px;text-align:center}
.win-msg.show{display:block}
</style>
</head>
<body>
<h1>Mini Crossword</h1>
<div class="puzzle-select" id="pzl-sel"></div>
<div class="stats">
  <div class="stat">Filled: <b id="filled">0</b>/<b id="total">0</b></div>
  <div class="stat">Puzzle: <b id="pzl-num">1</b></div>
</div>
<div class="grid-wrap">
  <div class="grid" id="grid"></div>
  <div class="clues" id="clues"></div>
</div>
<div class="controls">
  <button onclick="checkPuzzle()">Check</button>
  <button onclick="revealWord()">Reveal Word</button>
  <button onclick="clearPuzzle()">Clear</button>
</div>
<div class="win-msg" id="win">ðŸŽ‰ Puzzle Complete!</div>
<script>
const PUZZLES=[
  {
    size:7,
    grid:[
      ['C','O','D','E','#','U','I'],
      ['A','#','A','#','B','N','#'],
      ['S','T','A','C','K','I','T'],
      ['E','#','T','#','#','X','#'],
      ['#','L','A','N','G','#','J'],
      ['A','O','M','A','#','A','S'],
      ['P','G','E','M','#','P','#']
    ],
    clues:{
      across:[
        {num:1,row:0,col:0,text:"Source instructions (4)",len:4},
        {num:5,row:0,col:5,text:"User interface abbr. (2)",len:2},
        {num:7,row:2,col:0,text:"Data structure LIFO (5)",len:5},
        {num:8,row:2,col:5,text:"\"___ bit\" (2)",len:2},
        {num:10,row:4,col:1,text:"Programming ___ (4)",len:4},
        {num:12,row:4,col:6,text:"JavaScript abbr. (1)",len:1},
        {num:13,row:5,col:0,text:"___ file (3)",len:3},
        {num:14,row:5,col:5,text:"Application (2)",len:2},
        {num:15,row:6,col:0,text:"___ message (3)",len:3},
        {num:16,row:6,col:5,text:"Package (1)",len:1}
      ],
      down:[
        {num:1,row:0,col:0,text:"Switch statement option (4)",len:4},
        {num:2,row:0,col:2,text:"Information (4)",len:4},
        {num:3,row:0,col:3,text:"\"___ structure\" (1)",len:1},
        {num:4,row:0,col:5,text:"Linux-like OS (4)",len:4},
        {num:6,row:1,col:4,text:"Binary digit (2)",len:2},
        {num:9,row:2,col:6,text:"\"___ else\" statement (1)",len:1},
        {num:10,row:4,col:1,text:"Record/event keeper (3)",len:3},
        {num:11,row:4,col:3,text:"Not a number (3)",len:3},
        {num:12,row:4,col:6,text:"JavaScript abbr. (2)",len:2}
      ]
    }
  },
  {
    size:7,
    grid:[
      ['S','W','I','F','T','#','#'],
      ['E','#','N','#','A','R','M'],
      ['T','#','P','U','B','#','A'],
      ['#','C','U','#','#','N','P'],
      ['V','A','T','#','V','O','#'],
      ['A','R','#','K','I','D','#'],
      ['R','#','H','T','M','L','#']
    ],
    clues:{
      across:[
        {num:1,row:0,col:0,text:"Apple's language (5)",len:5},
        {num:4,row:1,col:2,text:"Input abbr. (3)",len:3},
        {num:6,row:1,col:4,text:"Processor type (3)",len:3},
        {num:7,row:2,col:0,text:"__tab character (1)",len:1},
        {num:8,row:2,col:2,text:"Public keyword (3)",len:3},
        {num:9,row:2,col:6,text:"Array.map (1)",len:1},
        {num:10,row:3,col:1,text:"Carriage return (1)",len:1},
        {num:11,row:3,col:5,text:"Node package (1)",len:1},
        {num:12,row:4,col:0,text:"Value-added type (3)",len:3},
        {num:13,row:4,col:4,text:"Visual code abbr. (2)",len:2},
        {num:14,row:5,col:0,text:"Variable (2)",len:2},
        {num:15,row:5,col:3,text:"Child ___ process (3)",len:3},
        {num:16,row:6,col:0,text:"Variable scope (1)",len:1},
        {num:17,row:6,col:2,text:"Web markup (4)",len:4}
      ],
      down:[
        {num:1,row:0,col:0,text:"Collection type (3)",len:3},
        {num:2,row:0,col:2,text:"User ___ (5)",len:5},
        {num:3,row:0,col:4,text:"Tabulated (3)",len:3},
        {num:4,row:1,col:5,text:"Network node (4)",len:4},
        {num:5,row:0,col:3,text:"Function keyword (1)",len:1},
        {num:10,row:3,col:1,text:"Auto-complete (3)",len:3},
        {num:12,row:4,col:0,text:"Variable abbr. (3)",len:3},
        {num:13,row:4,col:4,text:"Vim command (2)",len:2},
        {num:15,row:5,col:3,text:"Transfer (2)",len:2}
      ]
    }
  },
  {
    size:6,
    grid:[
      ['B','Y','T','E','S','#'],
      ['U','#','Y','#','C','R'],
      ['G','I','P','#','A','U'],
      ['#','N','E','X','T','N'],
      ['G','T','#','M','#','#'],
      ['O','#','O','S','#','#']
    ],
    clues:{
      across:[
        {num:1,row:0,col:0,text:"Data units (5)",len:5},
        {num:4,row:1,col:2,text:"Type annotation (2)",len:2},
        {num:6,row:1,col:4,text:"Source control (2)",len:2},
        {num:7,row:2,col:0,text:"Git issue (3)",len:3},
        {num:8,row:2,col:4,text:"Auto-update (2)",len:2},
        {num:9,row:3,col:1,text:"Next.js keyword (4)",len:4},
        {num:10,row:4,col:0,text:"___ routine (2)",len:2},
        {num:11,row:4,col:3,text:"Memory abbr. (1)",len:1},
        {num:12,row:5,col:0,text:"Object (1)",len:1},
        {num:13,row:5,col:2,text:"Operating system (2)",len:2}
      ],
      down:[
        {num:1,row:0,col:0,text:"Software defect (3)",len:3},
        {num:2,row:0,col:1,text:"Integer abbr. (3)",len:3},
        {num:3,row:0,col:2,text:"Category (4)",len:4},
        {num:4,row:0,col:3,text:"\"___ if\" (1)",len:1},
        {num:5,row:0,col:4,text:"SCA tool (4)",len:4},
        {num:6,row:1,col:5,text:"Execute (3)",len:3},
        {num:9,row:3,col:1,text:"Test abbr. (1)",len:1},
        {num:11,row:4,col:3,text:"Meta tag (2)",len:2}
      ]
    }
  }
];

let currentPuzzle=0,selectedCell=null,selectedDir='across',cells=[],gridData=[];

function initPuzzle(idx){
  currentPuzzle=idx;
  const P=PUZZLES[idx];
  gridData=P.grid.map(r=>r.map(c=>c==='#'?'#':''));
  document.getElementById('pzl-num').textContent=idx+1;
  buildGrid(P);
  buildClues(P);
  buildPuzzleSelect();
  updateFilled();
  document.getElementById('win').classList.remove('show');
}

function buildGrid(P){
  const grid=document.getElementById('grid');
  grid.innerHTML='';
  grid.style.gridTemplateColumns=`repeat(${P.size},clamp(32px,7vw,42px))`;
  cells=[];
  const nums=getNumbering(P);
  for(let r=0;r<P.size;r++){
    cells[r]=[];
    for(let c=0;c<P.size;c++){
      const d=document.createElement('div');d.className='cell';
      if(P.grid[r][c]==='#'){d.classList.add('black');cells[r][c]=null;grid.appendChild(d);continue}
      if(nums[r]&&nums[r][c]){
        const n=document.createElement('span');n.className='num';n.textContent=nums[r][c];d.appendChild(n);
      }
      d.dataset.r=r;d.dataset.c=c;
      d.addEventListener('click',()=>selectCell(r,c));
      cells[r][c]=d;grid.appendChild(d);
    }
  }
}

function getNumbering(P){
  const nums={};
  [...P.clues.across,...P.clues.down].forEach(cl=>{
    if(!nums[cl.row])nums[cl.row]={};
    nums[cl.row][cl.col]=cl.num;
  });
  return nums;
}

function buildClues(P){
  const el=document.getElementById('clues');el.innerHTML='';
  ['across','down'].forEach(dir=>{
    const h=document.createElement('h3');h.textContent=dir==='across'?'Across':'Down';el.appendChild(h);
    P.clues[dir].forEach(cl=>{
      const d=document.createElement('div');d.className='clue';d.dataset.dir=dir;d.dataset.num=cl.num;
      d.innerHTML=`<b>${cl.num}.</b>${cl.text}`;
      d.addEventListener('click',()=>{
        selectedDir=dir;selectCell(cl.row,cl.col);
      });
      el.appendChild(d);
    });
  });
}

function selectCell(r,c){
  if(!cells[r]||!cells[r][c])return;
  if(selectedCell&&selectedCell.r===r&&selectedCell.c===c){
    selectedDir=selectedDir==='across'?'down':'across';
  }
  selectedCell={r,c};
  highlightCells();
}

function highlightCells(){
  for(let r=0;r<PUZZLES[currentPuzzle].size;r++)
    for(let c=0;c<PUZZLES[currentPuzzle].size;c++)
      if(cells[r]&&cells[r][c]){cells[r][c].classList.remove('selected','highlighted')}
  document.querySelectorAll('.clue').forEach(c=>c.classList.remove('active'));
  if(!selectedCell)return;
  cells[selectedCell.r][selectedCell.c].classList.add('selected');
  const word=getWordCells(selectedCell.r,selectedCell.c,selectedDir);
  word.forEach(([wr,wc])=>{if(cells[wr]&&cells[wr][wc])cells[wr][wc].classList.add('highlighted')});
  // highlight clue
  const cl=findClue(selectedCell.r,selectedCell.c,selectedDir);
  if(cl){const e=document.querySelector(`.clue[data-dir="${selectedDir}"][data-num="${cl.num}"]`);if(e)e.classList.add('active')}
}

function getWordCells(r,c,dir){
  const P=PUZZLES[currentPuzzle];const res=[];
  if(dir==='across'){
    let sc=c;while(sc>0&&P.grid[r][sc-1]!=='#')sc--;
    for(let cc=sc;cc<P.size&&P.grid[r][cc]!=='#';cc++)res.push([r,cc]);
  } else {
    let sr=r;while(sr>0&&P.grid[sr-1][c]!=='#')sr--;
    for(let rr=sr;rr<P.size&&P.grid[rr][c]!=='#';rr++)res.push([rr,c]);
  }
  return res;
}

function findClue(r,c,dir){
  const P=PUZZLES[currentPuzzle];
  const wc=getWordCells(r,c,dir);
  if(!wc.length)return null;
  const [sr,sc]=wc[0];
  return P.clues[dir].find(cl=>cl.row===sr&&cl.col===sc);
}

function moveNext(){
  if(!selectedCell)return;
  const wc=getWordCells(selectedCell.r,selectedCell.c,selectedDir);
  const idx=wc.findIndex(([r,c])=>r===selectedCell.r&&c===selectedCell.c);
  if(idx<wc.length-1){selectedCell={r:wc[idx+1][0],c:wc[idx+1][1]};highlightCells()}
}

function movePrev(){
  if(!selectedCell)return;
  const wc=getWordCells(selectedCell.r,selectedCell.c,selectedDir);
  const idx=wc.findIndex(([r,c])=>r===selectedCell.r&&c===selectedCell.c);
  if(idx>0){selectedCell={r:wc[idx-1][0],c:wc[idx-1][1]};highlightCells()}
}

function updateFilled(){
  const P=PUZZLES[currentPuzzle];let filled=0,total=0;
  for(let r=0;r<P.size;r++)for(let c=0;c<P.size;c++){
    if(P.grid[r][c]!=='#'){total++;if(gridData[r][c])filled++}
  }
  document.getElementById('filled').textContent=filled;
  document.getElementById('total').textContent=total;
}

function renderCells(){
  const P=PUZZLES[currentPuzzle];
  for(let r=0;r<P.size;r++)for(let c=0;c<P.size;c++){
    if(cells[r]&&cells[r][c]){
      const spans=cells[r][c].querySelectorAll('.letter');
      spans.forEach(s=>s.remove());
      if(gridData[r][c]){
        const s=document.createElement('span');s.className='letter';s.textContent=gridData[r][c];
        cells[r][c].appendChild(s);
      }
    }
  }
  updateFilled();checkWin();
}

function checkPuzzle(){
  const P=PUZZLES[currentPuzzle];
  for(let r=0;r<P.size;r++)for(let c=0;c<P.size;c++){
    if(cells[r]&&cells[r][c]&&gridData[r][c]){
      cells[r][c].classList.remove('correct');
      if(gridData[r][c]===P.grid[r][c])cells[r][c].classList.add('correct');
      else cells[r][c].style.color='#e74c3c';
      setTimeout(()=>{if(cells[r]&&cells[r][c])cells[r][c].style.color=''},1500);
    }
  }
}

function revealWord(){
  if(!selectedCell)return;
  const P=PUZZLES[currentPuzzle];
  const wc=getWordCells(selectedCell.r,selectedCell.c,selectedDir);
  wc.forEach(([r,c])=>{gridData[r][c]=P.grid[r][c]});
  renderCells();
}

function clearPuzzle(){
  const P=PUZZLES[currentPuzzle];
  gridData=P.grid.map(r=>r.map(c=>c==='#'?'#':''));
  renderCells();
}

function checkWin(){
  const P=PUZZLES[currentPuzzle];
  for(let r=0;r<P.size;r++)for(let c=0;c<P.size;c++){
    if(P.grid[r][c]!=='#'&&gridData[r][c]!==P.grid[r][c])return;
  }
  document.getElementById('win').classList.add('show');
}

function buildPuzzleSelect(){
  const el=document.getElementById('pzl-sel');el.innerHTML='';
  PUZZLES.forEach((_,i)=>{
    const b=document.createElement('button');b.textContent=`Puzzle ${i+1}`;
    if(i===currentPuzzle)b.classList.add('active');
    b.addEventListener('click',()=>initPuzzle(i));
    el.appendChild(b);
  });
}

document.addEventListener('keydown',e=>{
  if(!selectedCell)return;
  const key=e.key.toUpperCase();
  if(key.length===1&&key>='A'&&key<='Z'){
    gridData[selectedCell.r][selectedCell.c]=key;
    renderCells();moveNext();return;
  }
  if(e.key==='Backspace'){
    if(!gridData[selectedCell.r][selectedCell.c])movePrev();
    gridData[selectedCell.r][selectedCell.c]='';
    renderCells();return;
  }
  if(e.key==='ArrowRight'){selectedDir='across';moveNext()}
  if(e.key==='ArrowLeft'){selectedDir='across';movePrev()}
  if(e.key==='ArrowDown'){selectedDir='down';moveNext()}
  if(e.key==='ArrowUp'){selectedDir='down';movePrev()}
  if(e.key==='Tab'){e.preventDefault();selectedDir=selectedDir==='across'?'down':'across';highlightCells()}
});

initPuzzle(0);
</script>
</body>
</html>
