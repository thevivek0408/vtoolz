<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tic Tac Toe</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; overflow: hidden; background: #1a1a2e; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #e0e0e0; }
        h1 { font-size: 28px; color: #6c5ce7; margin-bottom: 8px; }
        #status { font-size: 18px; margin-bottom: 12px; min-height: 28px; }
        #board { display: grid; grid-template-columns: repeat(3, var(--cell)); gap: 6px; }
        .cell { width: var(--cell); height: var(--cell); background: #16213e; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: var(--font); font-weight: bold; cursor: pointer; transition: background 0.2s, transform 0.15s; user-select: none; touch-action: manipulation; }
        .cell:hover { background: #1e2d4a; }
        .cell:active { transform: scale(0.95); }
        .cell.x { color: #4ecca3; }
        .cell.o { color: #e74c3c; }
        .cell.win { background: #2d1b69; animation: pulse 0.5s ease; }
        @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.08); } }
        #controls { margin-top: 16px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .btn { padding: 8px 20px; font-size: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .btn-primary { background: #6c5ce7; color: #fff; }
        .btn-primary:hover { background: #5a4bd1; }
        .btn-secondary { background: #333; color: #ccc; }
        .btn-secondary:hover { background: #444; }
        .btn-secondary.active { background: #6c5ce7; color: #fff; }
        #scoreboard { display: flex; gap: 20px; margin-bottom: 12px; font-size: 15px; }
        #scoreboard span { font-weight: bold; }
        .sx { color: #4ecca3; } .so { color: #e74c3c; } .sd { color: #aaa; }
    </style>
</head>
<body>
    <h1>‚ùå‚≠ï Tic Tac Toe</h1>
    <div id="scoreboard">
        <span class="sx">X: <span id="sx">0</span></span>
        <span class="sd">Draw: <span id="sd">0</span></span>
        <span class="so">O: <span id="so">0</span></span>
    </div>
    <div id="status">Your turn (X)</div>
    <div id="board"></div>
    <div id="controls">
        <button class="btn btn-secondary active" id="btnEasy">Easy</button>
        <button class="btn btn-secondary" id="btnMedium">Medium</button>
        <button class="btn btn-secondary" id="btnHard">Hard</button>
        <button class="btn btn-secondary" id="btn2P">2 Player</button>
        <button class="btn btn-primary" id="btnReset">New Game</button>
    </div>

    <script>
    (function() {
        const boardEl = document.getElementById('board');
        const statusEl = document.getElementById('status');
        const sxEl = document.getElementById('sx');
        const soEl = document.getElementById('so');
        const sdEl = document.getElementById('sd');

        let board, turn, gameOver, mode, scores;
        const WINS = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

        function resize() {
            const s = Math.min(window.innerWidth - 40, window.innerHeight - 220, 400);
            const cell = Math.floor((s - 12) / 3);
            document.documentElement.style.setProperty('--cell', cell + 'px');
            document.documentElement.style.setProperty('--font', Math.floor(cell * 0.5) + 'px');
        }

        function init() {
            board = Array(9).fill('');
            turn = 'X';
            gameOver = false;
            statusEl.textContent = mode === '2p' ? "X's turn" : 'Your turn (X)';
            boardEl.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const el = document.createElement('div');
                el.className = 'cell';
                el.addEventListener('click', () => handleClick(i));
                boardEl.appendChild(el);
            }
        }

        function handleClick(i) {
            if (gameOver || board[i]) return;
            if (mode !== '2p' && turn === 'O') return;
            makeMove(i, turn);
            if (!gameOver && mode !== '2p') {
                setTimeout(aiMove, 300);
            }
        }

        function makeMove(i, player) {
            board[i] = player;
            const el = boardEl.children[i];
            el.textContent = player;
            el.classList.add(player.toLowerCase());

            const win = checkWin(player);
            if (win) {
                gameOver = true;
                win.forEach(idx => boardEl.children[idx].classList.add('win'));
                if (mode === '2p') {
                    statusEl.textContent = player + ' wins!';
                } else {
                    statusEl.textContent = player === 'X' ? 'üéâ You win!' : 'üòµ AI wins!';
                }
                scores[player]++;
                updateScores();
                return;
            }
            if (board.every(c => c)) {
                gameOver = true;
                statusEl.textContent = "It's a draw!";
                scores.D++;
                updateScores();
                return;
            }
            turn = turn === 'X' ? 'O' : 'X';
            if (mode === '2p') statusEl.textContent = turn + "'s turn";
            else statusEl.textContent = turn === 'X' ? 'Your turn (X)' : 'AI thinking...';
        }

        function checkWin(p) {
            for (const w of WINS) if (w.every(i => board[i] === p)) return w;
            return null;
        }

        function updateScores() {
            sxEl.textContent = scores.X;
            soEl.textContent = scores.O;
            sdEl.textContent = scores.D;
        }

        // AI
        function aiMove() {
            if (gameOver) return;
            let move;
            if (mode === 'hard') {
                move = minimax(board, 'O', 0).idx;
            } else if (mode === 'medium') {
                move = Math.random() < 0.6 ? minimax(board, 'O', 0).idx : randomMove();
            } else {
                move = Math.random() < 0.2 ? minimax(board, 'O', 0).idx : randomMove();
            }
            makeMove(move, 'O');
        }

        function randomMove() {
            const empty = board.map((v, i) => v ? null : i).filter(v => v !== null);
            return empty[Math.floor(Math.random() * empty.length)];
        }

        function minimax(b, player, depth) {
            const opp = player === 'X' ? 'O' : 'X';
            if (checkWinBoard(b, 'X')) return {score: -10 + depth};
            if (checkWinBoard(b, 'O')) return {score: 10 - depth};
            const empty = b.map((v, i) => v ? null : i).filter(v => v !== null);
            if (!empty.length) return {score: 0};

            const moves = [];
            for (const i of empty) {
                const nb = [...b]; nb[i] = player;
                const result = minimax(nb, opp, depth + 1);
                moves.push({idx: i, score: result.score});
            }
            if (player === 'O') moves.sort((a, b) => b.score - a.score);
            else moves.sort((a, b) => a.score - b.score);
            return moves[0];
        }

        function checkWinBoard(b, p) {
            return WINS.some(w => w.every(i => b[i] === p));
        }

        // Mode buttons
        function setMode(m) {
            mode = m;
            document.querySelectorAll('#controls .btn-secondary').forEach(b => b.classList.remove('active'));
            const map = {easy: 'btnEasy', medium: 'btnMedium', hard: 'btnHard', '2p': 'btn2P'};
            document.getElementById(map[m]).classList.add('active');
            init();
        }

        scores = {X: 0, O: 0, D: 0};
        document.getElementById('btnEasy').addEventListener('click', () => setMode('easy'));
        document.getElementById('btnMedium').addEventListener('click', () => setMode('medium'));
        document.getElementById('btnHard').addEventListener('click', () => setMode('hard'));
        document.getElementById('btn2P').addEventListener('click', () => setMode('2p'));
        document.getElementById('btnReset').addEventListener('click', init);
        window.addEventListener('resize', resize);

        resize();
        setMode('easy');
    })();
    </script>
</body>
</html>
