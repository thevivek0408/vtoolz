<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: blob:; connect-src 'self' https:; worker-src 'self' blob:; media-src 'self' blob: mediastream:;">
    <title>Vibox Arcade - Premium Games</title>
    <meta name="description" content="Play free browser games at Vibox Arcade. 2048, Flappy Bird, Doodle Jump, Fruit Ninja and more ‚Äî all running locally, no downloads needed.">
    <link rel="icon" href="../favicon.png" type="image/png">
    <link rel="stylesheet" href="../css/style.css?v=2">
    <link rel="stylesheet" href="style.css?v=2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <div class="container"
            style="display: flex; justify-content: space-between; align-items: center; padding: 20px;">
            <a href="../index.html" class="logo"
                style="font-weight: 800; font-size: 1.5rem; color: var(--text-dark); text-decoration:none;">Vibox<span
                    style="color:#FF6B6B">.</span></a>
            <nav>
                <a href="../index.html" style="font-weight: 600; color: var(--text-light); text-decoration:none;"><i
                        class="fas fa-arrow-left"></i> Back to Tools</a>
            </nav>
        </div>
    </header>

    <div class="hero-section">
        <div class="hero-bg-pattern"></div>
        <div class="hero-content">
            <h1 class="hero-title">Arcade Universe</h1>
            <p class="hero-subtitle">Discover curated, high-quality web games. Play instantly.</p>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="search-wrapper">
        <div class="search-box">
            <i class="fas fa-search" style="color:#ccc; margin-left: 10px;"></i>
            <input type="text" class="search-input" id="gameSearch"
                placeholder="Search for games (e.g. Subway Surfers)...">
            <button class="search-btn"><i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <!-- Categories -->
    <div class="categories-container" id="categoryTabs">
        <div class="category-pill active" data-cat="all">All Games</div>
        <div class="category-pill" data-cat="arcade">üïπÔ∏è Arcade</div>
        <div class="category-pill" data-cat="action">‚öîÔ∏è Action</div>
        <div class="category-pill" data-cat="puzzle">üß© Puzzle</div>
        <div class="category-pill" data-cat="strategy">‚ôüÔ∏è Strategy</div>
        <div class="category-pill" data-cat="sports">‚öΩ Sports</div>
    </div>

    <!-- Featured Section Removed -->

    <!-- Grid -->
    <div class="container">
        <div class="section-header">
            <div class="section-title">All Games</div>
            <div style="color: #888; font-size: 0.9rem;" id="gameCount">0 Games</div>
        </div>

        <div id="gamesGrid" class="games-grid">
            <div class="loading-state"><i class="fas fa-circle-notch fa-spin"></i> Loading...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const grid = document.getElementById('gamesGrid');
            const gameSearch = document.getElementById('gameSearch');
            const categoryTabs = document.getElementById('categoryTabs');
            const pills = document.querySelectorAll('.category-pill');
            let allGames = [];
            let currentFilter = 'all';

            // Load Games
            try {
                const res = await fetch('data/games-config.json');
                allGames = await res.json();
                renderGames(allGames);
            } catch (e) {
                grid.innerHTML = '<div class="loading-state" style="color:#FF6B6B">Could not load library. Please try again.</div>';
            }

            // Featured Render Removed

            // Grid Render
            function renderGames(games) {
                grid.innerHTML = '';
                document.getElementById('gameCount').innerText = `${games.length} Games`;

                if (games.length === 0) {
                    grid.innerHTML = '<div class="loading-state">No games found.</div>';
                    return;
                }

                games.forEach(game => {
                    // Skip if it is the featured one? Optional. Let's show all.
                    const card = document.createElement('a');
                    card.className = 'game-card';
                    card.href = `play.html?id=${game.id}`;

                    let icon = 'üéÆ';
                    if (game.category === 'arcade') icon = 'üïπÔ∏è';
                    if (game.category === 'puzzle') icon = 'üß©';

                    // Specific icons
                    if (game.name.toLowerCase().includes('subway')) icon = 'üèÑ';
                    if (game.name.toLowerCase().includes('chess')) icon = '‚ôüÔ∏è';

                    if (game.image) {
                        // Use image if available
                        card.innerHTML = `
                            <div class="game-thumb" style="background-image: url('${game.image}'); background-size: cover; background-position: center;"></div>
                            <div class="game-details">
                                <div class="game-name">${game.name}</div>
                                <div class="game-cat"><i class="fas fa-tag" style="font-size:0.7em"></i> ${game.category}</div>
                            </div>
                        `;
                    } else {
                        // Fallback to Icon
                        card.innerHTML = `
                            <div class="game-thumb" loading="lazy">${icon}</div>
                            <div class="game-details">
                                <div class="game-name">${game.name}</div>
                                <div class="game-cat"><i class="fas fa-tag" style="font-size:0.7em"></i> ${game.category}</div>
                            </div>
                        `;
                    }
                    grid.appendChild(card);
                });
            }

            // Filtering
            pills.forEach(pill => {
                pill.addEventListener('click', () => {
                    pills.forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');
                    currentFilter = pill.dataset.cat;
                    filterLogic();
                });
            });

            gameSearch.addEventListener('input', filterLogic);

            function filterLogic() {
                const term = gameSearch.value.toLowerCase();
                const filtered = allGames.filter(g => {
                    const matchesTerm = g.name.toLowerCase().includes(term);
                    const matchesCat = currentFilter === 'all' || g.category.toLowerCase() === currentFilter;
                    return matchesTerm && matchesCat;
                });
                renderGames(filtered);
            }
        });
    </script>
    <script src="../js/loader.js" defer></script>
</body>

</html>